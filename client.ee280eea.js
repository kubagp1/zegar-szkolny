parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"oc1r":[function(require,module,exports) {

},{}],"Af5E":[function(require,module,exports) {
"use strict";function t(t){for(var r=t[0].start,e=[],n=0,a=t;n<a.length;n++){var s,o,i=a[n];s=i.start>=r?i.start-r:i.start+(86400-r),o=i.end>=r?i.end-r:i.end+(86400-r),e.push({start:s,end:o})}return e}function r(r){for(var e=[],n=0,a=r;n<a.length;n++){if(!("number"==typeof(null==(u=a[n])?void 0:u.start)&&u.start<=86400&&u.start>=0&&"number"==typeof(null==u?void 0:u.end)&&u.end<=86400&&u.end>=0))throw Error("The timetable has an incorrect entry.");e.push({start:u.start,end:u.end})}for(var s=e.sort(function(t,r){return t.start-r.start}),o=t(s),i=1;i<o.length;i++)if(o[i].start<o[i-1].end)throw Error("Overlapping lessons are present in the timetable.");for(var d=0,l=o;d<l.length;d++){var u;if((u=l[d]).start>u.end)throw Error("Lesson in the timetable starts before it ends.")}return o.map(function(t,r){return{relativeStart:t.start,relativeEnd:t.end,absoluteStart:s[r].start,absoluteEnd:s[r].end}})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.constructTimetable=void 0,exports.constructTimetable=r;
},{}],"lUi2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./validation"),e=[{start:25800,end:28500},{start:28800,end:31500},{start:32100,end:34800},{start:35400,end:38100},{start:39300,end:42e3},{start:42600,end:45300},{start:45900,end:48600},{start:49200,end:51900},{start:52200,end:54900},{start:55200,end:57900},{start:58200,end:60900},{start:61200,end:63900},{start:64200,end:66900}],s=function(){function s(){try{this.lessons=this.loadFromStorage()}catch(t){console.error(t),this.restoreDeafultTimetable()}}return s.prototype.restoreDeafultTimetable=function(){this.lessons=(0,t.constructTimetable)(e)},s.prototype.loadFromStorage=function(){var e=localStorage.getItem("timetable");if("string"!=typeof e)throw Error("Failed to load timetable from localStorage.");var s=JSON.parse(e);if(!Array.isArray(s))throw Error("Timetable from localStorage is not an array.");return(0,t.constructTimetable)(s)},s.prototype.load=function(e){this.lessons=(0,t.constructTimetable)(e),this.saveToStorage()},s.prototype.saveToStorage=function(){localStorage.setItem("timetable",JSON.stringify(this.lessons.map(function(t){return{start:t.absoluteStart,end:t.absoluteEnd}})))},s.prototype.getRelativeTime=function(t){t%=86400;var e=this.lessons[0];return t<e.absoluteStart?86400-e.absoluteStart+t:t-e.absoluteStart},s.prototype.getLatestLesson=function(t){for(var e=this.lessons[this.lessons.length-1],s=0;s<this.lessons.length;s++){if(t<this.lessons[s].relativeStart){e=this.lessons[s-1];break}}return e},s.prototype.getNextLesson=function(t){for(var e=this.lessons[0],s=1;s<this.lessons.length;s++){var r=this.lessons[s];if(t<r.relativeStart){e=r;break}}return e},s.prototype.onBreak=function(t){var e=this.getRelativeTime(t);return e>this.getLatestLesson(e).relativeEnd},s.prototype.onLesson=function(t){return!this.onBreak(t)},s.prototype.getProgress=function(t){var e=this.getRelativeTime(t),s=this.getLatestLesson(e);if(this.onBreak(t)){var r=this.getNextLesson(e);if(0!=r.relativeStart)var o=r.relativeStart-s.relativeEnd;else o=86400-s.relativeEnd;return(e-s.relativeEnd)/o}var n=s.relativeEnd-s.relativeStart;return(e-s.relativeStart)/n},s.prototype.secondsSinceLessonStart=function(t){var e=this.getRelativeTime(t);return this.onBreak(t)&&console.warn("secondsFromLessonBeggining used on break!"),e-this.getLatestLesson(e).relativeStart},s.prototype.secondsToNextLessonStart=function(t){var e=this.getRelativeTime(t);this.onLesson(t)&&console.warn("secondsToNextLesson used on lesson!");var s=this.getNextLesson(e);return 0!=s.relativeStart?s.relativeStart-e:s.relativeStart+(86400-e)},s.prototype.secondsToEndOfLesson=function(t){var e=this.getRelativeTime(t);return this.onBreak(t)&&console.warn("secondsToEndOfLesson used on break!"),this.getLatestLesson(e).relativeEnd-e},s}();exports.default=s;
},{"./validation":"Af5E"}],"uafx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(){var e=this;this.dom={clock:document.querySelector(".clock"),hours:document.querySelector("#hours"),minutes:document.querySelector("#minutes"),progressInfo:document.querySelector(".progress-info"),progressBar:document.querySelector(".progress-filled"),fullscreenButton:document.querySelector("#open-fullscreen"),preferencesButton:document.querySelector("#open-preferences"),preferencesContainer:document.querySelector("#preferences-container"),iframe:document.querySelector("iframe#preferences")},this.dom.fullscreenButton.addEventListener("click",function(){document.documentElement.requestFullscreen()});var r=function(){window.innerHeight==screen.height?document.documentElement.classList.add("fullscreen"):document.documentElement.classList.remove("fullscreen")};window.addEventListener("resize",r),r(),this.dom.preferencesButton.addEventListener("click",function(){e.dom.preferencesContainer.classList.remove("d-none")}),this.dom.preferencesContainer.addEventListener("click",function(r){r.target==e.dom.preferencesContainer&&e.dom.preferencesContainer.classList.add("d-none")}),this.dom.iframe.addEventListener("load",function(){setTimeout(function(){e.dom.preferencesContainer.classList.add("d-none"),e.dom.preferencesContainer.classList.remove("invisible")},200)})}return e.prototype.update=function(e){void 0!==e.hours&&(this.dom.hours.innerText=e.hours.toString()),void 0!==e.minutes&&(this.dom.minutes.innerText=e.minutes.toString()),void 0!==e.progress&&this.dom.progressBar.style.setProperty("--width",(100*e.progress).toString()+"%"),void 0!==e.info&&(this.dom.progressInfo.innerText=e.info),void 0!==e.theme&&(r("clock-color","var(--"+e.theme+"-clock-color)"),r("background-color","var(--"+e.theme+"-background-color)"),r("progress-background-color","var(--"+e.theme+"-progress-background-color)"),r("progress-filled-color","var(--"+e.theme+"-progress-filled-color)"),r("progress-tip-color","var(--"+e.theme+"-progress-tip-color)"))},e}();function r(e,r){document.documentElement.style.setProperty("--"+e,r)}exports.default=e;
},{}],"SWIu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={singular:"godzina",plural:"godziny",pluralGenitive:"godzin"},t={singular:"minuta",plural:"minuty",pluralGenitive:"minut"},n={singular:"sekunda",plural:"sekundy",pluralGenitive:"sekund"},i={singular:"a",plural:"y",pluralGenitive:"o"};function r(e,t){return 1==(e=Math.abs(e))?t.singular:e%10>4||e%10<2||e%100<15&&e%100>11?t.pluralGenitive:t.plural}var s=function(){function s(e){this.timetable=e}return s.prototype.humanizeTime=function(s){var a=parseInt(new Date(1e3*s).toISOString().substr(11,2)),o=parseInt(new Date(1e3*s).toISOString().substr(14,2)),u=parseInt(new Date(1e3*s).toISOString().substr(17,2));return a>0&&o>0?r(a,i)+" "+a+" "+r(a,e)+" i "+o+" "+r(o,t):a>0&&u>0?r(a,i)+" "+a+" "+r(a,e)+" i "+u+" "+r(u,n):a>0?r(a,i)+" "+a+" "+r(a,e):o>0&&u>0?r(o,i)+" "+o+" "+r(o,t)+" i "+u+" "+r(u,n):o>0?r(o,i)+" "+o+" "+r(o,t):r(u,i)+" "+u+" "+r(u,n)},s.prototype.generateSinceLessonStart=function(e){return"Od początku lekcji minęł"+this.humanizeTime(this.timetable.secondsSinceLessonStart(e))},s.prototype.generateToEndOfLesson=function(e){return"Do końca lekcji pozostał"+this.humanizeTime(this.timetable.secondsToEndOfLesson(e))},s.prototype.generateToNextLessonStart=function(e){return"Do końca przerwy pozostał"+this.humanizeTime(this.timetable.secondsToNextLessonStart(e))},s.prototype.generate=function(e){return this.timetable.onLesson(e)?this.timetable.getProgress(e)<1/3?this.generateSinceLessonStart(e):this.generateToEndOfLesson(e):this.generateToNextLessonStart(e)},s}();exports.default=s;
},{}],"rdUD":[function(require,module,exports) {
"use strict";var e,o,r,t,s;Object.defineProperty(exports,"__esModule",{value:!0}),exports.NativeEventType=exports.NativeErrorName=exports.ErrorCode=exports.Resolution=exports.MessageType=void 0,exports.MessageType=e,function(e){e.Call="call",e.Reply="reply",e.Syn="syn",e.SynAck="synAck",e.Ack="ack"}(e||(exports.MessageType=e={})),exports.Resolution=o,function(e){e.Fulfilled="fulfilled",e.Rejected="rejected"}(o||(exports.Resolution=o={})),exports.ErrorCode=r,function(e){e.ConnectionDestroyed="ConnectionDestroyed",e.ConnectionTimeout="ConnectionTimeout",e.NoIframeSrc="NoIframeSrc"}(r||(exports.ErrorCode=r={})),exports.NativeErrorName=t,function(e){e.DataCloneError="DataCloneError"}(t||(exports.NativeErrorName=t={})),exports.NativeEventType=s,function(e){e.Message="message"}(s||(exports.NativeEventType=s={}));
},{}],"zZjE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=function(t,e){var o=[],n=!1;return{destroy:function(r){n||(n=!0,e("".concat(t,": Destroying connection")),o.forEach(function(t){t(r)}))},onDestroy:function(t){n?t():o.push(t)}}};exports.default=t;
},{}],"iWU9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(e){return function(){if(e){for(var t,o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];(t=console).log.apply(t,["[Penpal]"].concat(r))}}};exports.default=e;
},{}],"Y4zv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t={"http:":"80","https:":"443"},o=/^(https?:)?\/\/([^/:]+)?(:(\d+))?/,e=["file:","data:"],r=function(r){if(r&&e.find(function(t){return r.startsWith(t)}))return"null";var c,n,a,u=document.location,s=o.exec(r);s?(c=s[1]?s[1]:u.protocol,n=s[2],a=s[4]):(c=u.protocol,n=u.hostname,a=u.port);var i=a&&a!==t[c]?":".concat(a):"";return"".concat(c,"//").concat(n).concat(i)};exports.default=r;
},{}],"ubmT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deserializeError=exports.serializeError=void 0;var r=function(r){return{name:r.name,message:r.message,stack:r.stack}};exports.serializeError=r;var e=function(r){var e=new Error;return Object.keys(r).forEach(function(s){return e[s]=r[s]}),e};exports.deserializeError=e;
},{}],"LK4E":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./errorSerialization"),r=require("./enums"),n=function(n,t,o){var a=n.localName,i=n.local,s=n.remote,c=n.originForSending,l=n.originForReceiving,u=!1,d=function(n){if(n.source===s&&n.data.penpal===r.MessageType.Call)if(n.origin===l){var i=n.data,d=i.methodName,p=i.args,v=i.id;o("".concat(a,": Received ").concat(d,"() call"));var g=function(n){return function(t){if(o("".concat(a,": Sending ").concat(d,"() reply")),u)o("".concat(a,": Unable to send ").concat(d,"() reply due to destroyed connection"));else{var i={penpal:r.MessageType.Reply,id:v,resolution:n,returnValue:t};n===r.Resolution.Rejected&&t instanceof Error&&(i.returnValue=(0,e.serializeError)(t),i.returnValueIsError=!0);try{s.postMessage(i,c)}catch(p){if(p.name===r.NativeErrorName.DataCloneError){var l={penpal:r.MessageType.Reply,id:v,resolution:r.Resolution.Rejected,returnValue:(0,e.serializeError)(p),returnValueIsError:!0};s.postMessage(l,c)}throw p}}}};new Promise(function(e){return e(t[d].apply(t,p))}).then(g(r.Resolution.Fulfilled),g(r.Resolution.Rejected))}else o("".concat(a," received message from origin ").concat(n.origin," which did not match expected origin ").concat(l))};return i.addEventListener(r.NativeEventType.Message,d),function(){u=!0,i.removeEventListener(r.NativeEventType.Message,d)}};exports.default=n;
},{"./errorSerialization":"ubmT","./enums":"rdUD"}],"aoL9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=0,t=function(){return++e};exports.default=t;
},{}],"Cc6N":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.deserializeMethods=exports.serializeMethods=exports.setAtKeyPath=void 0;var e=".",o=function(t){return t?t.split(e):[]},r=function(t){return t.join(e)},n=function(t,e){var n=o(e||"");return n.push(t),r(n)},i=function(t,e,r){var n=o(e);return n.reduce(function(t,e,o){return void 0===t[e]&&(t[e]={}),o===n.length-1&&(t[e]=r),t[e]},t),t};exports.setAtKeyPath=i;var u=function e(o,r){var i={};return Object.keys(o).forEach(function(u){var s=o[u],c=n(u,r);"object"===t(s)&&Object.assign(i,e(s,c)),"function"==typeof s&&(i[c]=s)}),i};exports.serializeMethods=u;var s=function(t){var e={};for(var o in t)i(e,o,t[o]);return e};exports.deserializeMethods=s;
},{}],"lHhd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./generateId")),r=require("./errorSerialization"),n=require("./methodSerialization"),t=require("./enums");function o(e){return e&&e.__esModule?e:{default:e}}var a=function(o,a,i,c,s){var d=a.localName,l=a.local,u=a.remote,v=a.originForSending,g=a.originForReceiving,f=!1;s("".concat(d,": Connecting call sender"));var p=i.reduce(function(n,o){var a;return n[o]=(a=o,function(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];var p;s("".concat(d,": Sending ").concat(a,"() call"));try{u.closed&&(p=!0)}catch(y){p=!0}if(p&&c(),f){var m=new Error("Unable to send ".concat(a,"() call due ")+"to destroyed connection");throw m.code=t.ErrorCode.ConnectionDestroyed,m}return new Promise(function(n,i){var c=(0,e.default)();l.addEventListener(t.NativeEventType.Message,function e(o){if(o.source===u&&o.data.penpal===t.MessageType.Reply&&o.data.id===c)if(o.origin===g){var v=o.data;s("".concat(d,": Received ").concat(a,"() reply")),l.removeEventListener(t.NativeEventType.Message,e);var f=v.returnValue;v.returnValueIsError&&(f=(0,r.deserializeError)(f)),(v.resolution===t.Resolution.Fulfilled?n:i)(f)}else s("".concat(d," received message from origin ").concat(o.origin," which did not match expected origin ").concat(g))});var f={penpal:t.MessageType.Call,id:c,methodName:a,args:o};u.postMessage(f,v)})}),n},{});return Object.assign(o,(0,n.deserializeMethods)(p)),function(){f=!0}};exports.default=a;
},{"./generateId":"aoL9","./errorSerialization":"ubmT","./methodSerialization":"Cc6N","./enums":"rdUD"}],"cxOO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("../connectCallReceiver")),r=n(require("../connectCallSender"));function n(e){return e&&e.__esModule?e:{default:e}}var o=function(n,o,t,a,i){var c,d,u=a.destroy,l=a.onDestroy,s={};return function(a){if(a.origin===o){i("Parent: Handshake - Received ACK");var f={localName:"Parent",local:window,remote:a.source,originForSending:t,originForReceiving:o};c&&c(),c=(0,e.default)(f,n,i),l(c),d&&d.forEach(function(e){delete s[e]}),d=a.data.methodNames;var v=(0,r.default)(s,f,d,u,i);return l(v),s}i("Parent: Handshake - Received ACK message from origin ".concat(a.origin," which did not match expected origin ").concat(o))}};exports.default=o;
},{"../connectCallReceiver":"LK4E","../connectCallSender":"lHhd"}],"Y5wX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../enums"),t=function(t,n,i,r){return function(s){if(s.origin===i){t("Parent: Handshake - Received SYN, responding with SYN-ACK");var o={penpal:e.MessageType.SynAck,methodNames:Object.keys(n)};s.source.postMessage(o,r)}else t("Parent: Handshake - Received SYN message from origin ".concat(s.origin," which did not match expected origin ").concat(i))}};exports.default=t;
},{"../enums":"rdUD"}],"wNEw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=6e4,t=function(t,r){var n=r.destroy,o=r.onDestroy,a=setInterval(function(){t.isConnected||(clearInterval(a),n())},e);o(function(){clearInterval(a)})};exports.default=t;
},{}],"GL97":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./enums"),o=function(o,t){var r;return void 0!==o&&(r=window.setTimeout(function(){var r=new Error("Connection timed out after ".concat(o,"ms"));r.code=e.ErrorCode.ConnectionTimeout,t(r)},o)),function(){clearTimeout(r)}};exports.default=o;
},{"./enums":"rdUD"}],"xbYu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=require("../enums"),e=function(e){if(!e.src&&!e.srcdoc){var o=new Error("Iframe must have src or srcdoc property defined.");throw o.code=r.ErrorCode.NoIframeSrc,o}};exports.default=e;
},{"../enums":"rdUD"}],"zxSB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../enums"),r=l(require("../createDestructor")),t=l(require("../createLogger")),a=l(require("./getOriginFromSrc")),i=l(require("./handleAckMessageFactory")),n=l(require("./handleSynMessageFactory")),o=require("../methodSerialization"),u=l(require("./monitorIframeRemoval")),s=l(require("../startConnectionTimeout")),d=l(require("./validateIframeHasSrcOrSrcDoc"));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(l){var c=l.iframe,f=l.methods,v=void 0===f?{}:f,m=l.childOrigin,g=l.timeout,p=l.debug,y=void 0!==p&&p,q=(0,t.default)(y),M=(0,r.default)("Parent",q),h=M.onDestroy,w=M.destroy;m||((0,d.default)(c),m=(0,a.default)(c.src));var S="null"===m?"*":m,T=(0,o.serializeMethods)(v),E=(0,n.default)(q,T,m,S),O=(0,i.default)(T,m,S,M,q);return{promise:new Promise(function(r,t){var a=(0,s.default)(g,w),i=function(t){if(t.source===c.contentWindow&&t.data)if(t.data.penpal!==e.MessageType.Syn)if(t.data.penpal!==e.MessageType.Ack);else{var i=O(t);i&&(a(),r(i))}else E(t)};window.addEventListener(e.NativeEventType.Message,i),q("Parent: Awaiting handshake"),(0,u.default)(c,M),h(function(r){window.removeEventListener(e.NativeEventType.Message,i),r&&t(r)})}),destroy:function(){w()}}};exports.default=c;
},{"../enums":"rdUD","../createDestructor":"zZjE","../createLogger":"iWU9","./getOriginFromSrc":"Y4zv","./handleAckMessageFactory":"cxOO","./handleSynMessageFactory":"Y5wX","../methodSerialization":"Cc6N","./monitorIframeRemoval":"wNEw","../startConnectionTimeout":"GL97","./validateIframeHasSrcOrSrcDoc":"xbYu"}],"gVyS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../enums"),i=r(require("../connectCallReceiver")),n=r(require("../connectCallSender"));function r(e){return e&&e.__esModule?e:{default:e}}var o=function(r,o,t,a){var d=t.destroy,c=t.onDestroy;return function(t){if(r instanceof RegExp?r.test(t.origin):"*"===r||r===t.origin){a("Child: Handshake - Received SYN-ACK, responding with ACK");var s="null"===t.origin?"*":t.origin,l={penpal:e.MessageType.Ack,methodNames:Object.keys(o)};window.parent.postMessage(l,s);var u={localName:"Child",local:window,remote:window.parent,originForSending:s,originForReceiving:t.origin},g=(0,i.default)(u,o,a);c(g);var p={},f=(0,n.default)(p,u,t.data.methodNames,d,a);return c(f),p}a("Child: Handshake - Received SYN-ACK from origin ".concat(t.origin," which did not match expected origin ").concat(r))}};exports.default=o;
},{"../enums":"rdUD","../connectCallReceiver":"LK4E","../connectCallSender":"lHhd"}],"gkTM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("../createDestructor")),t=o(require("../createLogger")),r=require("../enums"),n=o(require("./handleSynAckMessageFactory")),i=require("../methodSerialization"),a=o(require("../startConnectionTimeout"));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){try{clearTimeout()}catch(e){return!1}return!0},u=function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=o.parentOrigin,d=void 0===u?"*":u,v=o.methods,c=void 0===v?{}:v,l=o.timeout,p=o.debug,f=void 0!==p&&p,g=(0,t.default)(f),y=(0,e.default)("Child",g),m=y.destroy,M=y.onDestroy,h=(0,i.serializeMethods)(c),w=(0,n.default)(d,h,y,g);return{promise:new Promise(function(e,t){var n=(0,a.default)(l,m),i=function t(i){if(s()&&i.source===parent&&i.data&&i.data.penpal===r.MessageType.SynAck){var a=w(i);a&&(window.removeEventListener(r.NativeEventType.Message,t),n(),e(a))}};window.addEventListener(r.NativeEventType.Message,i),function(){g("Child: Handshake - Sending SYN");var e={penpal:r.MessageType.Syn},t=d instanceof RegExp?"*":d;window.parent.postMessage(e,t)}(),M(function(e){window.removeEventListener(r.NativeEventType.Message,i),e&&t(e)})}),destroy:function(){m()}}};exports.default=u;
},{"../createDestructor":"zZjE","../createLogger":"iWU9","../enums":"rdUD","./handleSynAckMessageFactory":"gVyS","../methodSerialization":"Cc6N","../startConnectionTimeout":"GL97"}],"H3u9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"connectToChild",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"connectToParent",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"ErrorCode",{enumerable:!0,get:function(){return t.ErrorCode}});var e=n(require("./parent/connectToChild")),r=n(require("./child/connectToParent")),t=require("./enums");function n(e){return e&&e.__esModule?e:{default:e}}
},{"./parent/connectToChild":"zxSB","./child/connectToParent":"gkTM","./enums":"rdUD"}],"ohOK":[function(require,module,exports) {
var t=module.exports.exists=function t(e,n){if("string"==typeof n&&(n=n.split(".")),!(n instanceof Array)||0===n.length)return!1;var r=(n=n.slice()).shift();return"object"==typeof e&&null!==e&&(0===n.length?Object.hasOwnProperty.apply(e,[r]):t(e[r],n))},e=module.exports.get=function t(e,n){if("string"==typeof n&&(n=n.split(".")),n instanceof Array&&0!==n.length){var r=(n=n.slice()).shift();if("object"==typeof e&&null!==e)return 0===n.length?e[r]:n.length?t(e[r],n):void 0}},n=module.exports.search=function t(e,n,r){if("string"==typeof n&&(n=n.split(".")),n instanceof Array&&0!==n.length){var o=(n=n.slice()).shift();if("object"==typeof e&&null!==e)return"*"===o&&(o=".*"),"string"==typeof o&&(o=new RegExp(o)),0===n.length?Object.keys(e).filter(o.test.bind(o)).map(function(t){var n=e[t];return r&&r(n,e,t),n}):Array.prototype.concat.apply([],Object.keys(e).filter(o.test.bind(o)).map(function(o){return t(e[o],n,r)}))}},r=module.exports.removeSearch=function(t,e){return n(t,e,function(t,e,n){delete e[n]}),t},o=module.exports.put=function t(e,n,r){if("string"==typeof n&&(n=n.split(".")),!(n instanceof Array)||0===n.length)return!1;var o=(n=n.slice()).shift();return"object"==typeof e&&null!==e&&"__proto__"!==o&&(0!==n.length?(void 0===e[o]&&(e[o]={}),"object"==typeof e[o]&&null!==e[o]&&t(e[o],n,r)):void(e[o]=r))},l=module.exports.remove=function t(e,n,r){if("string"==typeof n&&(n=n.split(".")),!(n instanceof Array)||0===n.length)return!1;var o=(n=n.slice()).shift();return"object"==typeof e&&null!==e&&(0===n.length?!!Object.hasOwnProperty.call(e,o)&&(delete e[o],!0):t(e[o],n,r))},i=module.exports.deepKeys=function t(e,n,r){n=n||{},void 0===r&&(r=[]);var o=[];for(var l in e)Object.hasOwnProperty.call(e,l)&&(n.leavesOnly&&"object"==typeof e[l]||o.push(r.concat([l])),"object"==typeof e[l]&&null!==e[l]&&(o=o.concat(t(e[l],{leavesOnly:n.leavesOnly},r.concat([l])))));return n.asStrings&&(o=o.map(function(t){return t.join(".")})),o};
},{}],"DIq0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){return function(t){this.value=t,this.setValue=function(t){this.value=t,"function"==typeof this.applySetting&&this.applySetting()}}}();exports.default=t;
},{}],"OOp1":[function(require,module,exports) {
"use strict";var e=this&&this.__assign||function(){return(e=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var l in t=arguments[r])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)},t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var r=t(require("./Setting"));function o(e,t){document.documentElement.style.setProperty("--"+e,t)}var l=function(){return function(t){this.showLogoOnStartup=e(e({},new r.default(t.showLogoOnStartup)),{applySetting:function(){console.warn("missing implementation!")}}),this.timeOffset=e(e({},new r.default(t.timeOffset)),{applySetting:function(){window.app.timeOffset=this.value}}),this.colors={default:{background:e(e({},new r.default(t.colors.default.background)),{applySetting:function(){o("default-background-color",this.value)}}),clock:e(e({},new r.default(t.colors.default.clock)),{applySetting:function(){o("default-clock-color",this.value)}}),progressBackground:e(e({},new r.default(t.colors.default.progressBackground)),{applySetting:function(){o("default-progress-background-color",this.value)}}),progressFilled:e(e({},new r.default(t.colors.default.progressFilled)),{applySetting:function(){o("default-progress-filled-color",this.value)}}),progressTip:e(e({},new r.default(t.colors.default.progressTip)),{applySetting:function(){o("default-progress-tip-color",this.value)}})},alternative:{background:e(e({},new r.default(t.colors.alternative.background)),{applySetting:function(){o("alternative-background-color",this.value)}}),clock:e(e({},new r.default(t.colors.alternative.clock)),{applySetting:function(){o("alternative-clock-color",this.value)}}),progressBackground:e(e({},new r.default(t.colors.alternative.progressBackground)),{applySetting:function(){o("alternative-progress-background-color",this.value)}}),progressFilled:e(e({},new r.default(t.colors.alternative.progressFilled)),{applySetting:function(){o("alternative-progress-filled-color",this.value)}}),progressTip:e(e({},new r.default(t.colors.alternative.progressTip)),{applySetting:function(){o("alternative-progress-tip-color",this.value)}})}},this.appearance={showProgressBar:e(e({},new r.default(t.appearance.showProgressBar)),{applySetting:function(){0==this.value?document.querySelector(".progress-container").style.setProperty("display","none"):document.querySelector(".progress-container").style.setProperty("display","initial")}}),showProgressBarTip:e(e({},new r.default(t.appearance.showProgressBarTip)),{applySetting:function(){0==this.value?document.querySelector(".progress-filled").style.setProperty("border-right-style","none"):document.querySelector(".progress-filled").style.setProperty("border-right-style","solid")}}),displayOffsetedTime:e(e({},new r.default(t.appearance.displayOffsetedTime)),{applySetting:function(){window.app.iterate()}})}}}();exports.default=l;
},{"./Setting":"DIq0"}],"hlkX":[function(require,module,exports) {
module.exports={showLogoOnStartup:!0,timeOffset:0,colors:{default:{clock:"#ffffff",background:"#000000",progressBackground:"#24264d",progressFilled:"#e8cf43",progressTip:"#5a62e8"},alternative:{clock:"#e8cf43",background:"#111111",progressBackground:"#24264d",progressFilled:"#e8cf43",progressTip:"#5a62e8"}},appearance:{showProgressBar:!0,showProgressBarTip:!0,displayOffsetedTime:!0}};
},{}],"jxNv":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}var t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var o=require("penpal"),s=t(require("dotty")),r=t(require("./settings")),n=t(require("./default.json"));function l(){try{var e=localStorage.getItem("settings");if("string"!=typeof e)throw new TypeError('"settings" entry is not string');return JSON.parse(e)}catch(t){return null}}function i(t){return"object"==e(t)&&("boolean"==typeof(null==t?void 0:t.showLogoOnStartup)&&("number"==typeof(null==t?void 0:t.timeOffset)&&("object"==e(null==t?void 0:t.colors)&&("object"==e(null==t?void 0:t.colors.default)&&("string"==typeof(null==t?void 0:t.colors.default.clock)&&("string"==typeof(null==t?void 0:t.colors.default.background)&&("string"==typeof(null==t?void 0:t.colors.default.progressBackground)&&("string"==typeof(null==t?void 0:t.colors.default.progressFilled)&&("string"==typeof(null==t?void 0:t.colors.default.progressTip)&&("object"==e(null==t?void 0:t.colors.alternative)&&("string"==typeof(null==t?void 0:t.colors.alternative.clock)&&("string"==typeof(null==t?void 0:t.colors.alternative.background)&&("string"==typeof(null==t?void 0:t.colors.alternative.progressBackground)&&("string"==typeof(null==t?void 0:t.colors.alternative.progressFilled)&&("string"==typeof(null==t?void 0:t.colors.alternative.progressTip)&&("object"==e(null==t?void 0:t.appearance)&&("boolean"==typeof(null==t?void 0:t.appearance.showProgressBar)&&("boolean"==typeof(null==t?void 0:t.appearance.showProgressBarTip)&&"boolean"==typeof(null==t?void 0:t.appearance.displayOffsetedTime)))))))))))))))))))}var a=function(){function e(e){this.timetable=e;var t=l();i(t)?this.settings=new r.default(t):(console.log("Using default settings"),this.settings=new r.default(n.default)),setTimeout(this.applySettings.bind(this),0),this.connectToIframe()}return e.prototype.applySettings=function(){!function e(t){Object.entries(t).forEach(function(t){t[0];var o=t[1];"function"==typeof o.applySetting?o.applySetting():e(o)})}(this.settings)},e.prototype.saveSettingsToLocalStorage=function(){localStorage.setItem("settings",JSON.stringify({showLogoOnStartup:this.settings.showLogoOnStartup.value,timeOffset:this.settings.timeOffset.value,colors:{default:{clock:this.settings.colors.default.clock.value,background:this.settings.colors.default.background.value,progressBackground:this.settings.colors.default.progressBackground.value,progressFilled:this.settings.colors.default.progressFilled.value,progressTip:this.settings.colors.default.progressTip.value},alternative:{clock:this.settings.colors.alternative.clock.value,background:this.settings.colors.alternative.background.value,progressBackground:this.settings.colors.alternative.progressBackground.value,progressFilled:this.settings.colors.alternative.progressFilled.value,progressTip:this.settings.colors.alternative.progressTip.value}},appearance:{showProgressBar:this.settings.appearance.showProgressBar.value,showProgressBarTip:this.settings.appearance.showProgressBarTip.value,displayOffsetedTime:this.settings.appearance.displayOffsetedTime.value}}))},e.prototype.connectToIframe=function(){var e=this,t=document.querySelector("iframe#preferences");(0,o.connectToChild)({iframe:t,methods:{setValue:function(t,o){console.log("set",{path:t,newValue:o}),s.default.get(e.settings,t).setValue(o),e.saveSettingsToLocalStorage()},getValue:function(t){return console.log("get",{path:t}),s.default.get(e.settings,t).value},close:function(){t.parentElement.classList.add("d-none")},restoreDefaultConfig:function(){localStorage.removeItem("settings"),window.location.reload()},getTimetable:function(){return e.timetable.lessons},setTimetable:function(t){e.timetable.load(t)},restoreDefaultTimetable:function(){e.timetable.restoreDeafultTimetable()}}})},e}();exports.default=a;
},{"penpal":"H3u9","dotty":"ohOK","./settings":"OOp1","./default.json":"hlkX"}],"WznY":[function(require,module,exports) {
module.exports={currentVersion:"v1.5"};
},{}],"eNq2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./currentVersion.json"),e=function(){function e(){this.URL=new URL("VERSION.txt",window.location.origin),"localhost"!=this.URL.hostname&&setInterval(this.checkForUpdates.bind(this),36e5)}return e.prototype.checkForUpdates=function(){var e=this;fetch(this.URL.href,{cache:"no-store"}).then(function(t){return t.text()}).then(function(o){o.trim()!=t.currentVersion.trim()&&e.reloadPage()})},e.prototype.reloadPage=function(){window.location.reload()},e}();exports.default=e;
},{"./currentVersion.json":"WznY"}],"KVb6":[function(require,module,exports) {
"use strict";var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var e=t(require("./timetable")),i=t(require("./dom")),r=t(require("./info")),o=t(require("./config")),s=t(require("./autoupdater"));function a(){return(new Date-(new Date).setHours(0,0,0,0))/1e3}var n=function(){function t(){this.timetable=new e.default,this.dom=new i.default,this.info=new r.default(this.timetable),this.config=new o.default(this.timetable),this.autoupdater=new s.default,this.timeOffset=0,setTimeout(this.iterate.bind(this),1),this.loopInterval=setInterval(this.loop.bind(this),1e3)}return t.prototype._debugSetTime=function(t){var e=t.split(":"),i=e[0],r=e[1],o=60*(i=parseInt(i))*60+60*(r=parseInt(r));this.timeOffset=o-a()},t.prototype.getTime=function(){return(a()+this.timeOffset/1e3)%86400},t.prototype.getRealTime=function(){return a()},t.prototype.loop=function(){this._debugFastForward&&(this.timeOffset+=this._debugFastForward);var t=this.getTime(),e={},i=this.config.settings.appearance.displayOffsetedTime.value?t:this.getRealTime();e.hours=Math.floor(i/3600),e.minutes=Math.floor(i/60%60).toString().padStart(2,"0"),e.progress=this.timetable.getProgress(t),e.info=this.info.generate(t),e.theme=this.timetable.onBreak(t)?"alternative":"default",this.dom.update(e)},t.prototype.iterate=function(){this.loop()},t}();exports.default=n;
},{"./timetable":"lUi2","./dom":"uafx","./info":"SWIu","./config":"jxNv","./autoupdater":"eNq2"}],"lD19":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),require("./style.less");var t=e(require("./App"));window.app=new t.default;
},{"./style.less":"oc1r","./App":"KVb6"}]},{},["lD19"], null)
//# sourceMappingURL=/client.ee280eea.js.map